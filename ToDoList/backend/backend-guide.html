<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ›¸ åç«¯å¼€å‘ä»£ç å¤§å…¨ - å…¨æ ˆå¼€å‘é“¶æ²³ç³»</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ›¸</text></svg>">
    <style>
        .code-section {
            background: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            margin: 24px 0;
            overflow: hidden;
        }
        
        .code-header {
            background: linear-gradient(135deg, #68d391, #38a169);
            color: white;
            padding: 16px 24px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .code-header.nodejs {
            background: linear-gradient(135deg, #68d391, #38a169);
        }
        
        .code-header.python {
            background: linear-gradient(135deg, #3776ab, #ffd43b);
        }
        
        .code-header.java {
            background: linear-gradient(135deg, #ed8b00, #5382a1);
        }
        
        .code-content {
            padding: 24px;
        }
        
        .difficulty-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: var(--border-radius);
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: auto;
        }
        
        .difficulty-beginner {
            background: var(--success-light);
            color: var(--success-color);
        }
        
        .difficulty-intermediate {
            background: var(--warning-light);
            color: var(--warning-color);
        }
        
        .difficulty-advanced {
            background: var(--error-light);
            color: var(--error-color);
        }
        
        .preview-box {
            background: var(--light-gray);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 16px;
            margin: 16px 0;
        }
        
        .preview-title {
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 12px;
        }
        
        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 16px 0;
        }
        
        .tag {
            background: var(--primary-light);
            color: var(--primary-color);
            padding: 4px 8px;
            border-radius: var(--border-radius);
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .tag.nodejs {
            background: #68d391;
            color: white;
        }
        
        .tag.python {
            background: #3776ab;
            color: white;
        }
        
        .tag.java {
            background: #ed8b00;
            color: white;
        }
        
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin: 32px 0;
        }
        
        .copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--glass-background);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            padding: 6px 12px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.8rem;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        
        .copy-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .code-container {
            position: relative;
        }
        
        .terminal-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 16px;
            border-radius: var(--border-radius);
            margin: 16px 0;
            font-family: 'Courier New', monospace;
            border-left: 4px solid var(--success-color);
        }
        
        .terminal-title {
            color: var(--success-color);
            font-weight: 600;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="layout">
        <div class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">ğŸ›¸ åç«¯ä»£ç å¤§å…¨</div>
                <ul class="sidebar-list">
                    <li><a href="#nodejs">Node.js æœåŠ¡å™¨</a></li>
                    <li><a href="#express">Express æ¡†æ¶</a></li>
                    <li><a href="#python">Python åç«¯</a></li>
                    <li><a href="#flask">Flask åº”ç”¨</a></li>
                    <li><a href="#django">Django æ¡†æ¶</a></li>
                    <li><a href="#java">Java åç«¯</a></li>
                    <li><a href="#spring">Spring Boot</a></li>
                    <li><a href="#api">RESTful API</a></li>
                    <li><a href="#database">æ•°æ®åº“æ“ä½œ</a></li>
                    <li><a href="#auth">èº«ä»½è®¤è¯</a></li>
                    <li><a href="#middleware">ä¸­é—´ä»¶</a></li>
                    <li><a href="#deployment">éƒ¨ç½²é…ç½®</a></li>
                </ul>
            </div>
        </div>

        <div class="main-content">
            <div class="info-bar">
                <input type="text" class="search-box" placeholder="ğŸ” æœç´¢åç«¯ä»£ç ...">
                <a href="../index.html">ğŸ  è¿”å›é¦–é¡µ</a>
                <button onclick="toggleSidebar()">ğŸ“‹ ç›®å½•</button>
                <button onclick="toggleTheme()">ğŸŒ™ ä¸»é¢˜</button>
                <button onclick="window.scrollTo(0,0)">â¬†ï¸ é¡¶éƒ¨</button>
            </div>

            <div class="container">
                <h1>ğŸ›¸ åç«¯å¼€å‘ä»£ç å¤§å…¨</h1>
                <p style="text-align: center; font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 40px;">
                    å®Œæ•´çš„åç«¯å¼€å‘ä»£ç ç¤ºä¾‹åº“ï¼Œæ¶µç›–Node.jsã€Pythonã€Javaç­‰ä¸»æµæŠ€æœ¯æ ˆ
                </p>

                <section id="nodejs">
                    <h2>ğŸŸ¢ Node.js æœåŠ¡å™¨</h2>
                    
                    <div class="code-section">
                        <div class="code-header nodejs">
                            <span>ğŸš€ åŸºç¡€HTTPæœåŠ¡å™¨</span>
                            <span class="difficulty-badge difficulty-beginner">åˆçº§</span>
                        </div>
                        <div class="code-content">
                            <div class="tag-list">
                                <span class="tag nodejs">Node.js</span>
                                <span class="tag">HTTP</span>
                                <span class="tag">æœåŠ¡å™¨</span>
                            </div>
                            <div class="code-container">
                                <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                                <div class="code">
                                    <pre>// server.js - åŸºç¡€HTTPæœåŠ¡å™¨
const http = require('http');
const url = require('url');
const fs = require('fs');
const path = require('path');

// åˆ›å»ºæœåŠ¡å™¨
const server = http.createServer((req, res) => {
    const parsedUrl = url.parse(req.url, true);
    const pathname = parsedUrl.pathname;
    const method = req.method;

    // è®¾ç½®CORSå¤´
    res.setHeader('Access-Control-Allow-Origin', '*');
    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');
    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

    // è·¯ç”±å¤„ç†
    if (pathname === '/' && method === 'GET') {
        res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });
        res.end(`
            <h1>æ¬¢è¿æ¥åˆ°Node.jsæœåŠ¡å™¨</h1>
            <p>å½“å‰æ—¶é—´: ${new Date().toLocaleString()}</p>
            <a href="/api/users">æŸ¥çœ‹ç”¨æˆ·API</a>
        `);
    } else if (pathname === '/api/users' && method === 'GET') {
        // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®
        const users = [
            { id: 1, name: 'å¼ ä¸‰', email: 'zhangsan@example.com' },
            { id: 2, name: 'æå››', email: 'lisi@example.com' }
        ];
        
        res.writeHead(200, { 'Content-Type': 'application/json; charset=utf-8' });
        res.end(JSON.stringify(users, null, 2));
    } else if (pathname === '/api/users' && method === 'POST') {
        // å¤„ç†POSTè¯·æ±‚
        let body = '';
        req.on('data', chunk => {
            body += chunk.toString();
        });
        
        req.on('end', () => {
            try {
                const userData = JSON.parse(body);
                userData.id = Date.now();
                userData.createdAt = new Date().toISOString();
                
                res.writeHead(201, { 'Content-Type': 'application/json; charset=utf-8' });
                res.end(JSON.stringify(userData, null, 2));
            } catch (error) {
                res.writeHead(400, { 'Content-Type': 'application/json; charset=utf-8' });
                res.end(JSON.stringify({ error: 'æ— æ•ˆçš„JSONæ•°æ®' }));
            }
        });
    } else {
        // 404å¤„ç†
        res.writeHead(404, { 'Content-Type': 'text/html; charset=utf-8' });
        res.end('<h1>404 - é¡µé¢æœªæ‰¾åˆ°</h1>');
    }
});

// å¯åŠ¨æœåŠ¡å™¨
const PORT = process.env.PORT || 3000;
server.listen(PORT, () => {
    console.log(`æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:${PORT}`);
});

// ä¼˜é›…å…³é—­
process.on('SIGTERM', () => {
    console.log('æ”¶åˆ°SIGTERMä¿¡å·ï¼Œæ­£åœ¨å…³é—­æœåŠ¡å™¨...');
    server.close(() => {
        console.log('æœåŠ¡å™¨å·²å…³é—­');
        process.exit(0);
    });
});</pre>
                                </div>
                            </div>
                            <div class="terminal-output">
                                <div class="terminal-title">è¿è¡Œå‘½ä»¤ï¼š</div>
                                node server.js<br>
                                æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000
                            </div>
                        </div>
                    </div>

                    <div class="code-section">
                        <div class="code-header nodejs">
                            <span>ğŸ“ æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</span>
                            <span class="difficulty-badge difficulty-intermediate">ä¸­çº§</span>
                        </div>
                        <div class="code-content">
                            <div class="code-container">
                                <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                                <div class="code">
                                    <pre>// fileOperations.js - æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
const fs = require('fs').promises;
const path = require('path');

class FileManager {
    constructor(baseDir = './data') {
        this.baseDir = baseDir;
        this.ensureDirectory();
    }

    // ç¡®ä¿ç›®å½•å­˜åœ¨
    async ensureDirectory() {
        try {
            await fs.access(this.baseDir);
        } catch (error) {
            await fs.mkdir(this.baseDir, { recursive: true });
            console.log(`åˆ›å»ºç›®å½•: ${this.baseDir}`);
        }
    }

    // è¯»å–æ–‡ä»¶
    async readFile(filename) {
        try {
            const filePath = path.join(this.baseDir, filename);
            const data = await fs.readFile(filePath, 'utf8');
            return JSON.parse(data);
        } catch (error) {
            if (error.code === 'ENOENT') {
                return null; // æ–‡ä»¶ä¸å­˜åœ¨
            }
            throw error;
        }
    }

    // å†™å…¥æ–‡ä»¶
    async writeFile(filename, data) {
        const filePath = path.join(this.baseDir, filename);
        const jsonData = JSON.stringify(data, null, 2);
        await fs.writeFile(filePath, jsonData, 'utf8');
        console.log(`æ–‡ä»¶å·²ä¿å­˜: ${filePath}`);
    }

    // è¿½åŠ å†…å®¹åˆ°æ–‡ä»¶
    async appendToFile(filename, data) {
        const filePath = path.join(this.baseDir, filename);
        const content = typeof data === 'string' ? data : JSON.stringify(data);
        await fs.appendFile(filePath, content + '\n', 'utf8');
    }

    // åˆ é™¤æ–‡ä»¶
    async deleteFile(filename) {
        try {
            const filePath = path.join(this.baseDir, filename);
            await fs.unlink(filePath);
            console.log(`æ–‡ä»¶å·²åˆ é™¤: ${filePath}`);
            return true;
        } catch (error) {
            if (error.code === 'ENOENT') {
                return false; // æ–‡ä»¶ä¸å­˜åœ¨
            }
            throw error;
        }
    }

    // åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶
    async listFiles() {
        try {
            const files = await fs.readdir(this.baseDir);
            const fileStats = await Promise.all(
                files.map(async (file) => {
                    const filePath = path.join(this.baseDir, file);
                    const stats = await fs.stat(filePath);
                    return {
                        name: file,
                        size: stats.size,
                        isDirectory: stats.isDirectory(),
                        modified: stats.mtime
                    };
                })
            );
            return fileStats;
        } catch (error) {
            console.error('è¯»å–ç›®å½•å¤±è´¥:', error);
            return [];
        }
    }

    // å¤åˆ¶æ–‡ä»¶
    async copyFile(source, destination) {
        const sourcePath = path.join(this.baseDir, source);
        const destPath = path.join(this.baseDir, destination);
        await fs.copyFile(sourcePath, destPath);
        console.log(`æ–‡ä»¶å·²å¤åˆ¶: ${source} -> ${destination}`);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
async function example() {
    const fileManager = new FileManager('./data');

    // ä¿å­˜ç”¨æˆ·æ•°æ®
    const users = [
        { id: 1, name: 'å¼ ä¸‰', email: 'zhangsan@example.com' },
        { id: 2, name: 'æå››', email: 'lisi@example.com' }
    ];
    
    await fileManager.writeFile('users.json', users);

    // è¯»å–ç”¨æˆ·æ•°æ®
    const loadedUsers = await fileManager.readFile('users.json');
    console.log('åŠ è½½çš„ç”¨æˆ·:', loadedUsers);

    // åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶
    const files = await fileManager.listFiles();
    console.log('ç›®å½•ä¸­çš„æ–‡ä»¶:', files);
}

// å¯¼å‡ºæ¨¡å—
module.exports = FileManager;

// å¦‚æœç›´æ¥è¿è¡Œæ­¤æ–‡ä»¶
if (require.main === module) {
    example().catch(console.error);
}</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="express">
                    <h2>ğŸš‚ Express æ¡†æ¶</h2>
                    
                    <div class="code-section">
                        <div class="code-header nodejs">
                            <span>ğŸ—ï¸ Express åŸºç¡€åº”ç”¨</span>
                            <span class="difficulty-badge difficulty-intermediate">ä¸­çº§</span>
                        </div>
                        <div class="code-content">
                            <div class="tag-list">
                                <span class="tag nodejs">Express</span>
                                <span class="tag">ä¸­é—´ä»¶</span>
                                <span class="tag">è·¯ç”±</span>
                            </div>
                            <div class="code-container">
                                <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                                <div class="code">
                                    <pre>// app.js - Expressåº”ç”¨
const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const morgan = require('morgan');
const rateLimit = require('express-rate-limit');

const app = express();

// ä¸­é—´ä»¶é…ç½®
app.use(helmet()); // å®‰å…¨å¤´
app.use(cors()); // è·¨åŸŸ
app.use(morgan('combined')); // æ—¥å¿—
app.use(express.json({ limit: '10mb' })); // JSONè§£æ
app.use(express.urlencoded({ extended: true })); // URLç¼–ç è§£æ

// é€Ÿç‡é™åˆ¶
const limiter = rateLimit({
    windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
    max: 100, // æœ€å¤š100ä¸ªè¯·æ±‚
    message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'
});
app.use('/api/', limiter);

// é™æ€æ–‡ä»¶æœåŠ¡
app.use('/static', express.static('public'));

// æ¨¡æ‹Ÿæ•°æ®åº“
let users = [
    { id: 1, name: 'å¼ ä¸‰', email: 'zhangsan@example.com', age: 25 },
    { id: 2, name: 'æå››', email: 'lisi@example.com', age: 30 }
];

// è‡ªå®šä¹‰ä¸­é—´ä»¶ - è¯·æ±‚æ—¥å¿—
app.use((req, res, next) => {
    console.log(`${new Date().toISOString()} - ${req.method} ${req.path}`);
    next();
});

// è‡ªå®šä¹‰ä¸­é—´ä»¶ - èº«ä»½éªŒè¯
const authenticate = (req, res, next) => {
    const token = req.headers.authorization;
    if (!token) {
        return res.status(401).json({ error: 'ç¼ºå°‘è®¤è¯ä»¤ç‰Œ' });
    }
    
    // ç®€å•çš„ä»¤ç‰ŒéªŒè¯ï¼ˆå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨JWTï¼‰
    if (token !== 'Bearer valid-token') {
        return res.status(401).json({ error: 'æ— æ•ˆçš„ä»¤ç‰Œ' });
    }
    
    req.user = { id: 1, name: 'å½“å‰ç”¨æˆ·' };
    next();
};

// è·¯ç”±å®šä¹‰
// é¦–é¡µ
app.get('/', (req, res) => {
    res.json({
        message: 'æ¬¢è¿ä½¿ç”¨Express API',
        version: '1.0.0',
        endpoints: {
            users: '/api/users',
            health: '/health'
        }
    });
});

// å¥åº·æ£€æŸ¥
app.get('/health', (req, res) => {
    res.json({
        status: 'OK',
        timestamp: new Date().toISOString(),
        uptime: process.uptime()
    });
});

// ç”¨æˆ·è·¯ç”±
// è·å–æ‰€æœ‰ç”¨æˆ·
app.get('/api/users', (req, res) => {
    const { page = 1, limit = 10, search } = req.query;
    
    let filteredUsers = users;
    
    // æœç´¢åŠŸèƒ½
    if (search) {
        filteredUsers = users.filter(user => 
            user.name.includes(search) || user.email.includes(search)
        );
    }
    
    // åˆ†é¡µ
    const startIndex = (page - 1) * limit;
    const endIndex = page * limit;
    const paginatedUsers = filteredUsers.slice(startIndex, endIndex);
    
    res.json({
        data: paginatedUsers,
        pagination: {
            page: parseInt(page),
            limit: parseInt(limit),
            total: filteredUsers.length,
            pages: Math.ceil(filteredUsers.length / limit)
        }
    });
});

// è·å–å•ä¸ªç”¨æˆ·
app.get('/api/users/:id', (req, res) => {
    const userId = parseInt(req.params.id);
    const user = users.find(u => u.id === userId);
    
    if (!user) {
        return res.status(404).json({ error: 'ç”¨æˆ·æœªæ‰¾åˆ°' });
    }
    
    res.json(user);
});

// åˆ›å»ºç”¨æˆ·
app.post('/api/users', authenticate, (req, res) => {
    const { name, email, age } = req.body;
    
    // éªŒè¯è¾“å…¥
    if (!name || !email) {
        return res.status(400).json({ 
            error: 'å§“åå’Œé‚®ç®±æ˜¯å¿…å¡«é¡¹' 
        });
    }
    
    // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
    const existingUser = users.find(u => u.email === email);
    if (existingUser) {
        return res.status(409).json({ 
            error: 'é‚®ç®±å·²å­˜åœ¨' 
        });
    }
    
    const newUser = {
        id: users.length + 1,
        name,
        email,
        age: age || null,
        createdAt: new Date().toISOString()
    };
    
    users.push(newUser);
    res.status(201).json(newUser);
});

// æ›´æ–°ç”¨æˆ·
app.put('/api/users/:id', authenticate, (req, res) => {
    const userId = parseInt(req.params.id);
    const userIndex = users.findIndex(u => u.id === userId);
    
    if (userIndex === -1) {
        return res.status(404).json({ error: 'ç”¨æˆ·æœªæ‰¾åˆ°' });
    }
    
    const { name, email, age } = req.body;
    
    // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
    if (name) users[userIndex].name = name;
    if (email) users[userIndex].email = email;
    if (age !== undefined) users[userIndex].age = age;
    users[userIndex].updatedAt = new Date().toISOString();
    
    res.json(users[userIndex]);
});

// åˆ é™¤ç”¨æˆ·
app.delete('/api/users/:id', authenticate, (req, res) => {
    const userId = parseInt(req.params.id);
    const userIndex = users.findIndex(u => u.id === userId);
    
    if (userIndex === -1) {
        return res.status(404).json({ error: 'ç”¨æˆ·æœªæ‰¾åˆ°' });
    }
    
    const deletedUser = users.splice(userIndex, 1)[0];
    res.json({ message: 'ç”¨æˆ·å·²åˆ é™¤', user: deletedUser });
});

// é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({ 
        error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯',
        message: process.env.NODE_ENV === 'development' ? err.message : undefined
    });
});

// 404å¤„ç†
app.use('*', (req, res) => {
    res.status(404).json({ 
        error: 'è·¯ç”±æœªæ‰¾åˆ°',
        path: req.originalUrl 
    });
});

// å¯åŠ¨æœåŠ¡å™¨
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
    console.log(`ExpressæœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ ${PORT}`);
});

module.exports = app;</pre>
                                </div>
                            </div>
                            <div class="preview-box">
                                <div class="preview-title">ğŸ“¦ package.json ä¾èµ–ï¼š</div>
                                <pre>{
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "helmet": "^7.0.0",
    "morgan": "^1.10.0",
    "express-rate-limit": "^6.8.1"
  }
}</pre>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="python">
                    <h2>ğŸ Python åç«¯</h2>
                    
                    <div class="code-section">
                        <div class="code-header python">
                            <span>ğŸŒ Python HTTPæœåŠ¡å™¨</span>
                            <span class="difficulty-badge difficulty-beginner">åˆçº§</span>
                        </div>
                        <div class="code-content">
                            <div class="tag-list">
                                <span class="tag python">Python</span>
                                <span class="tag">HTTP</span>
                                <span class="tag">æœåŠ¡å™¨</span>
                            </div>
                            <div class="code-container">
                                <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                                <div class="code">
                                    <pre># server.py - Python HTTPæœåŠ¡å™¨
import json
import urllib.parse
from http.server import HTTPServer, BaseHTTPRequestHandler
from datetime import datetime

class APIHandler(BaseHTTPRequestHandler):
    # æ¨¡æ‹Ÿæ•°æ®åº“
    users = [
        {"id": 1, "name": "å¼ ä¸‰", "email": "zhangsan@example.com", "age": 25},
        {"id": 2, "name": "æå››", "email": "lisi@example.com", "age": 30}
    ]

    def _set_headers(self, status_code=200, content_type='application/json'):
        """è®¾ç½®å“åº”å¤´"""
        self.send_response(status_code)
        self.send_header('Content-Type', f'{content_type}; charset=utf-8')
        self.send_header('Access-Control-Allow-Origin', '*')
        self.send_header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS')
        self.send_header('Access-Control-Allow-Headers', 'Content-Type, Authorization')
        self.end_headers()

    def _send_json(self, data, status_code=200):
        """å‘é€JSONå“åº”"""
        self._set_headers(status_code)
        response = json.dumps(data, ensure_ascii=False, indent=2)
        self.wfile.write(response.encode('utf-8'))

    def _send_html(self, html, status_code=200):
        """å‘é€HTMLå“åº”"""
        self._set_headers(status_code, 'text/html')
        self.wfile.write(html.encode('utf-8'))

    def _get_request_body(self):
        """è·å–è¯·æ±‚ä½“"""
        content_length = int(self.headers.get('Content-Length', 0))
        if content_length > 0:
            body = self.rfile.read(content_length)
            return json.loads(body.decode('utf-8'))
        return {}

    def do_OPTIONS(self):
        """å¤„ç†é¢„æ£€è¯·æ±‚"""
        self._set_headers()

    def do_GET(self):
        """å¤„ç†GETè¯·æ±‚"""
        parsed_path = urllib.parse.urlparse(self.path)
        path = parsed_path.path
        query_params = urllib.parse.parse_qs(parsed_path.query)

        if path == '/':
            # é¦–é¡µ
            html = f"""
            <html>
            <head><title>Python HTTPæœåŠ¡å™¨</title></head>
            <body>
                <h1>æ¬¢è¿æ¥åˆ°Python HTTPæœåŠ¡å™¨</h1>
                <p>å½“å‰æ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}</p>
                <ul>
                    <li><a href="/api/users">ç”¨æˆ·API</a></li>
                    <li><a href="/health">å¥åº·æ£€æŸ¥</a></li>
                </ul>
            </body>
            </html>
            """
            self._send_html(html)

        elif path == '/health':
            # å¥åº·æ£€æŸ¥
            health_data = {
                "status": "OK",
                "timestamp": datetime.now().isoformat(),
                "server": "Python HTTP Server"
            }
            self._send_json(health_data)

        elif path == '/api/users':
            # è·å–ç”¨æˆ·åˆ—è¡¨
            page = int(query_params.get('page', [1])[0])
            limit = int(query_params.get('limit', [10])[0])
            search = query_params.get('search', [None])[0]

            filtered_users = self.users
            
            # æœç´¢åŠŸèƒ½
            if search:
                filtered_users = [
                    user for user in self.users 
                    if search.lower() in user['name'].lower() or 
                       search.lower() in user['email'].lower()
                ]

            # åˆ†é¡µ
            start_index = (page - 1) * limit
            end_index = start_index + limit
            paginated_users = filtered_users[start_index:end_index]

            response_data = {
                "data": paginated_users,
                "pagination": {
                    "page": page,
                    "limit": limit,
                    "total": len(filtered_users),
                    "pages": (len(filtered_users) + limit - 1) // limit
                }
            }
            self._send_json(response_data)

        elif path.startswith('/api/users/'):
            # è·å–å•ä¸ªç”¨æˆ·
            try:
                user_id = int(path.split('/')[-1])
                user = next((u for u in self.users if u['id'] == user_id), None)
                
                if user:
                    self._send_json(user)
                else:
                    self._send_json({"error": "ç”¨æˆ·æœªæ‰¾åˆ°"}, 404)
            except ValueError:
                self._send_json({"error": "æ— æ•ˆçš„ç”¨æˆ·ID"}, 400)

        else:
            # 404
            self._send_json({"error": "è·¯ç”±æœªæ‰¾åˆ°"}, 404)

    def do_POST(self):
        """å¤„ç†POSTè¯·æ±‚"""
        if self.path == '/api/users':
            try:
                data = self._get_request_body()
                
                # éªŒè¯å¿…å¡«å­—æ®µ
                if not data.get('name') or not data.get('email'):
                    self._send_json({"error": "å§“åå’Œé‚®ç®±æ˜¯å¿…å¡«é¡¹"}, 400)
                    return

                # æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
                if any(u['email'] == data['email'] for u in self.users):
                    self._send_json({"error": "é‚®ç®±å·²å­˜åœ¨"}, 409)
                    return

                # åˆ›å»ºæ–°ç”¨æˆ·
                new_user = {
                    "id": max([u['id'] for u in self.users], default=0) + 1,
                    "name": data['name'],
                    "email": data['email'],
                    "age": data.get('age'),
                    "created_at": datetime.now().isoformat()
                }
                
                self.users.append(new_user)
                self._send_json(new_user, 201)

            except json.JSONDecodeError:
                self._send_json({"error": "æ— æ•ˆçš„JSONæ•°æ®"}, 400)
        else:
            self._send_json({"error": "è·¯ç”±æœªæ‰¾åˆ°"}, 404)

    def do_PUT(self):
        """å¤„ç†PUTè¯·æ±‚"""
        if self.path.startswith('/api/users/'):
            try:
                user_id = int(self.path.split('/')[-1])
                user_index = next((i for i, u in enumerate(self.users) if u['id'] == user_id), None)
                
                if user_index is None:
                    self._send_json({"error": "ç”¨æˆ·æœªæ‰¾åˆ°"}, 404)
                    return

                data = self._get_request_body()
                
                # æ›´æ–°ç”¨æˆ·ä¿¡æ¯
                if 'name' in data:
                    self.users[user_index]['name'] = data['name']
                if 'email' in data:
                    self.users[user_index]['email'] = data['email']
                if 'age' in data:
                    self.users[user_index]['age'] = data['age']
                
                self.users[user_index]['updated_at'] = datetime.now().isoformat()
                
                self._send_json(self.users[user_index])

            except (ValueError, json.JSONDecodeError):
                self._send_json({"error": "æ— æ•ˆçš„è¯·æ±‚"}, 400)
        else:
            self._send_json({"error": "è·¯ç”±æœªæ‰¾åˆ°"}, 404)

    def do_DELETE(self):
        """å¤„ç†DELETEè¯·æ±‚"""
        if self.path.startswith('/api/users/'):
            try:
                user_id = int(self.path.split('/')[-1])
                user_index = next((i for i, u in enumerate(self.users) if u['id'] == user_id), None)
                
                if user_index is None:
                    self._send_json({"error": "ç”¨æˆ·æœªæ‰¾åˆ°"}, 404)
                    return

                deleted_user = self.users.pop(user_index)
                self._send_json({
                    "message": "ç”¨æˆ·å·²åˆ é™¤",
                    "user": deleted_user
                })

            except ValueError:
                self._send_json({"error": "æ— æ•ˆçš„ç”¨æˆ·ID"}, 400)
        else:
            self._send_json({"error": "è·¯ç”±æœªæ‰¾åˆ°"}, 404)

def run_server(port=8000):
    """å¯åŠ¨æœåŠ¡å™¨"""
    server_address = ('', port)
    httpd = HTTPServer(server_address, APIHandler)
    print(f"Python HTTPæœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ {port}")
    print(f"è®¿é—® http://localhost:{port}")
    
    try:
        httpd.serve_forever()
    except KeyboardInterrupt:
        print("\næœåŠ¡å™¨å·²åœæ­¢")
        httpd.server_close()

if __name__ == '__main__':
    run_server()</pre>
                                </div>
                            </div>
                            <div class="terminal-output">
                                <div class="terminal-title">è¿è¡Œå‘½ä»¤ï¼š</div>
                                python server.py<br>
                                Python HTTPæœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ 8000<br>
                                è®¿é—® http://localhost:8000
                            </div>
                        </div>
                    </div>
                </section>

                <div class="footer-resources">
                    <h3>ğŸ”— ç›¸å…³èµ„æº</h3>
                    <p>
                        <a href="nodejs.html">ğŸŸ¢ Node.js æ•™ç¨‹</a> |
                        <a href="python.html">ğŸ Python æ•™ç¨‹</a> |
                        <a href="java.html">â˜• Java æ•™ç¨‹</a> |
                        <a href="../playground.html">ğŸ® ä»£ç æ¸¸ä¹åœº</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/galaxy-background.js"></script>
    <script src="../js/navigation.js"></script>
    <script>
        // å¤åˆ¶ä»£ç åŠŸèƒ½
        function copyCode(button) {
            const codeBlock = button.nextElementSibling.querySelector('pre');
            const text = codeBlock.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'å·²å¤åˆ¶!';
                button.style.background = 'var(--success-color)';
                button.style.color = 'white';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.color = '';
                }, 2000);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                button.textContent = 'å¤åˆ¶å¤±è´¥';
                setTimeout(() => {
                    button.textContent = 'å¤åˆ¶';
                }, 2000);
            });
        }
    </script>
</body>
</html> 